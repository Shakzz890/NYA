<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shakzz TV</title>
  <style>
    body { background: #000; color: #fff; font-family: sans-serif; margin: 0; }
    #video-container { width: 100%; height: 100vh; position: relative; }
    video { width: 100%; height: 100%; background: black; }
    #channelList { padding: 1em; display: flex; gap: 10px; overflow-x: auto; }
    .channel-button img { width: 50px; height: 50px; vertical-align: middle; }
    .channel-button { background: #222; color: white; border: none; padding: 10px; cursor: pointer; border-radius: 6px; }
  </style>
</head>
<body>

<div id="channelList"></div>
<div id="video-container">
  <video id="video" autoplay controls></video>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.8.0/shaka-player.compiled.js"></script>
<script>
  const channels = {
    one_ph: {
      name: "One PH",
      type: "clearkey",
      manifestUri: "https://qp-pldt-live-grp-04-prod.akamaized.net/out/u/oneph_sd.mpd",
      keyId: "92834ab4a7e1499b90886c5d49220e46",
      key: "a7108d9a6cfcc1b7939eb111daf09ab3",
      logo: "https://i.imgur.com/gkluDe9.png"
    },
    kapamilya_sd: {
      name: "Kapamilya Channel",
      type: "widevine",
      manifestUri: "http://143.44.136.110:6910/001/2/ch00000090990000001248/manifest.mpd?virtualDomain=001.live_hls.zte.com",
      licenseServer: "http://143.44.136.74:9443/widevine/?deviceId=02:00:00:00:00:00",
      logo: "https://upload.wikimedia.org/wikipedia/en/thumb/f/f2/Kapamilya_Channel_Logo_2020.svg/2560px-Kapamilya_Channel_Logo_2020.svg.png"
    }
  };

  const video = document.getElementById('video');
  const channelList = document.getElementById('channelList');
  const player = new shaka.Player(video);

  shaka.polyfill.installAll();

  if (!shaka.Player.isBrowserSupported()) {
    alert("Shaka Player not supported in this browser.");
  }

  function loadChannel(key) {
    const channel = channels[key];
    const drmConfig = {};

    if (channel.type === 'widevine') {
      drmConfig.servers = {
        'com.widevine.alpha': channel.licenseServer
      };
    } else if (channel.type === 'clearkey') {
      drmConfig.clearKeys = {
        [channel.keyId]: channel.key
      };
    }

    player.configure({ drm: drmConfig });

    player.load(channel.manifestUri).then(() => {
      console.log(`Now playing: ${channel.name}`);
    }).catch(e => {
      console.error(`Error playing ${channel.name}:`, e);
      alert(`Error playing ${channel.name}`);
    });
  }

  for (const [key, ch] of Object.entries(channels)) {
    const btn = document.createElement('button');
    btn.className = 'channel-button';
    btn.innerHTML = `<img src="${ch.logo}" alt="${ch.name}" /> ${ch.name}`;
    btn.onclick = () => loadChannel(key);
    channelList.appendChild(btn);
  }

  // Auto-play first channel
  loadChannel(Object.keys(channels)[0]);
</script>

</body>
</html>
